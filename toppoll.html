<head>
  <title>Toppoll</title>
</head>

<body>

  <div class="container">
    <div class="row">
      <h1>Top Poll</h1>
      <div class="col-md-8">
        <h3> &gt; New Poll</h3>
        {{> newPoll}}
      </div>
    </div>

    <div class="row">
      <div class="col-md-10">
        <h3> &gt; List of Polls</h3>
        <ul>
          {{> poll}}
        </ul>
      </div>
    </div>
  </div>

</body>

<template name="poll">
<table class="table table-striped">
  <thead>
  <tr>
    <th>Questions</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  {{#each polls}}
  <tr>
    <td>{{question}}</td>
    <td>
      <button class="btn btn-warning btn-vote btn-sm" data-toggle="modal" data-target="#voteModal" type="button">Vote Now</button> 
      <button class="btn btn-danger btn-delete btn-sm" type="button">Delete</button>
    </td>
  </tr>
  {{/each}}
  </tbody>
</table>

{{# if selectedVote}}
  <!-- MODAL -->
  <div id="voteModal" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
          <h4 class="modal-title">{{selectedVote.question}}</h4>
        </div>
        <div class="modal-body">
          <table class="table table-striped">
            <tbody>
              {{#each pollAnswers}}
              <tr>
                <td>{{answer}}</td>
                <td><strong>{{count}}</strong></td>
                <td><button class="btn btn-sm btn-vote-count btn-success">Vote!</button></td>
              </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
{{/if}}
</template>

<template name="newPoll">

<form class="form-horizontal new-poll" action="">
  <div class="form-group">

    <textarea id="" class="form-control" name="question" placeholder="Enter your poll question here"></textarea>
  </div>
  <div class="form-group">
    <input class="form-control" type="text" name="answer_a" placeholder="First poll answer">
  </div>
  <div class="form-group">
    <input class="form-control" type="text" name="answer_b" placeholder="Second poll answer">
  </div>
  <div class="form-group">
    <input class="form-control" type="text" name="answer_c" placeholder="third poll answer">
  </div>

  <div class="form-group">
    <button class="btn btn-primary" type="submit">Save</button>
  </div>

</form>


</template>
